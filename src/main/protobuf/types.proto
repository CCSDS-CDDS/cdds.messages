syntax = "proto3";

package ccsds.cdds;

import "descriptor.proto";

// Extend MessageOptions with a custom string field
extend google.protobuf.MessageOptions {
  string oid = 50001;
}



message AntennaId {
  option (oid) = "1.2.840.10003.";

  oneof antennaIdForm {
    string globalForm = 1;
    bytes localForm = 2;
  } 
}

enum FrameQuality {
    GOOD = 0 ;
    ERRED = 1;
    UNDETERMINED = 2;
}

/**
 * Date / Time definition for epoch 1958 with pico second precision
 */
message DateTime {
  uint32 days = 1;          // days since Jab 1st 1958
  uint32 msOfDay = 2;       // mill seconds of the day
  uint32 picoSecsOfMs = 3;  // sub pico seconds of the milliseconds
}

message Annotation {
  string name = 1;
  Value value = 2;
}

message Value {
  oneof value {
    double doubleValue = 3;
    float floatValue = 4;
    int32 int32Value = 5;
    uint32 uint32Value = 6;
    int64 int64Value = 7;
    uint64 uint64Value = 8;
    bool boolValue = 9;
    string stringValue = 10;
    bytes octetStringValue = 11;
  }  
}

message QualifiedValue {
  Value value = 1;
  ValueQualifier valueQualifier = 2;
  AlarmQualifier alarmQualifier = 3;
}

message EncodedQualifiedValue {
  bytes encodedValue = 1;
  ValueQualifier valueQualifier = 2;
  AlarmQualifier alarmQualifier = 3;
}

enum ValueQualifier {
    
  /**
   * The value is valid
   */ 
  VALID_VALUE = 0;
    
  /**
   * The value is now known to the provider
   */ 
  UNKNOWN_VALUE = 1;

  /**
   * The value is in known to the provider, but not defined int eh current context
   */ 
   UNDEFINED_VALUE = 2;
}

enum Alarm {
  NO_ALARM = 0;
  WARNING = 1;
  ALARM = 2;
}

message AlarmQualifier {
    
  /**
   * Indicates an alarm
   */
  Alarm alarm = 1;

  /**
   * A generic optional reason code for alarms
   */
  optional int64 alarmReason = 2;

  /**
   * An optional message describing the alarm for operators
   */
  optional string alarmMessage = 3;
}

  enum ProductionState {
    CONFIGURED = 0;
    OPERATIONAL = 1;
    HALTED = 2;
    INTERRUPTED = 3;
  }

  enum FrameSyncStatus {
    IN_LOCK = 0;
    OUT_OF_LOCK = 1;
    UNKNOWN_LOCK = 2;
  }

  /**
   * The Global Virtual Channel identifier
   */
  message GvcId {
    uint32 spacecraftId = 1;
    FrameVersion version = 2;
    uint32 virtualChannelId = 3; // optional, if omitted this is a master channel
    

  }

  /**
   * The frame version corresponding to the CCSDS frame versions.
   */
  enum FrameVersion {
    PACKET_TM = 0;  // 0: CCSDS 132.0 TM Space Data Link Protocol  
    AOS = 1;        // 1: CCSDS 732.0 AOS Space Data Link Protocol
    USLP = 2;       // 2: CCSDS 732.1 USLP Space Data Link Protocol
  }

  /**
   * An Object Identifier
   */ 
  message ObjectIdentifier {

    /**
     * An optional OID string in dotted notation.
     * Example: 1.2.3.4.5
     */
    string oidString = 1;

    /**
     * The sequence of numbers representing the 
     * Object Identifier
     */
    repeated uint64 arcs = 2;
  }

  /**
   * The Quality of Service definition governs the message delivery 
   */
  enum QoS {

    /**
     * Data shall be delivered 0..1 time
     */
    AT_MOST_ONCE = 0;

    /**
     * Data shall be delivered at least once, but potentially more often.
     */
    AT_LEAST_ONCE = 1;

    /**
     * Data shall be delivered exactly once
     */
    EXACTLY_ONCE = 3;
  }